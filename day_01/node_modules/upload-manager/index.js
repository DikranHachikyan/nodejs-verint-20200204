const {EventEmitter} = require('events');

module.exports.UploadManager = class UploadManager extends EventEmitter{

    //инициализира данните на класа
    constructor(){
       super(); //извикваме констр. на родителя 
    }

    upload(url){
        let progress = 0,
            filesize = 0,
            _this = this;
        
        console.log(`Upload started ${url}`);

        let progressInterval = setInterval(()=>{
            progress += 20;
            filesize += 50;
            _this.emit('progress',{'progress':progress, 'size':filesize})
        },200);

        setTimeout( ()=>{
            clearInterval(progressInterval);
            _this.emit('finished',filesize);
        },1200)

    }
}// upload manager
